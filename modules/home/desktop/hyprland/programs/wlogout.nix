# powerkey
{
  config,
  lib,
  pkgs,
  perSystem,
  ...
}: let
  hyprctl = "${pkgs.hyprland}/bin/hyprctl";
  hyprlock = "${pkgs.hyprlock}/bin/hyprlock";
  swaylock = "${config.programs.swaylock.package}/bin/swaylock";
  systemctl = "${pkgs.systemd}/bin/systemctl";

  # Wrapper script for formatting and prevent multiple instances
  powerkey = perSystem.self.mkScript {
    name = "powerkey";
    path = with pkgs; [procps wlogout];
    text = ''
      if ! $(pidof -q wlogout >/dev/null); then
        wlogout -b 2 -m 300 -L 500 -R 500
      fi
    '';
  };
in {
  # Add wrapper to path
  home.packages = [powerkey];

  # Run wlogout via powerkey button press
  wayland.windowManager.hyprland.settings = {
    bind = [", XF86PowerOff, exec, ${lib.getExe powerkey}"];
  };

  # Configure grid of 4 buttons
  programs.wlogout = {
    enable = true;

    layout = with pkgs; [
      {
        label = "lock";
        # action = "${hyprlock} --immediate";
        action = "${swaylock}";
        text = "lock";
        keybind = "l";
      }
      {
        label = "reboot";
        action = "${systemctl} reboot";
        text = "reboot";
        keybind = "r";
      }
      {
        label = "logout";
        action = "${hyprctl} dispatch exit 0";
        text = "logout";
        keybind = "q";
      }
      {
        label = "shutdown";
        action = "${systemctl} poweroff";
        text = "shutdown";
        keybind = "s";
      }
    ];

    style = let
      lock =
        pkgs.writeText "lock.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#EBDBB1" d="m291 3 2.082.504c37.02 9.151 70.08 33.429 90.31 65.717 15.457 25.65 22.848 53.353 22.706 83.228l-.005 3.45c-.005 3.597-.018 7.193-.03 10.788-.006 2.456-.01 4.91-.014 7.366-.011 5.982-.028 11.965-.049 17.947l3.225-.063c3.96-.073 7.92-.119 11.881-.157 1.712-.02 3.424-.047 5.136-.082 2.465-.048 4.93-.071 7.395-.089l2.308-.062c3.74-.002 5.836.312 9.015 2.352 2.931 3.019 3.166 4.614 3.174 8.705l.014 2.958v3.272l.01 3.46c.01 3.177.014 6.355.017 9.533.004 3.425.013 6.849.022 10.273.02 8.277.03 16.553.039 24.83l.015 11.695a51542.348 51542.348 0 0 1 .046 51.512c.008 13.537.033 27.073.066 40.61.033 13.9.05 27.8.054 41.701.002 7.803.01 15.607.036 23.41.022 6.649.03 13.297.02 19.946-.004 3.39 0 6.78.017 10.17.018 3.683.01 7.365-.002 11.049l.033 3.212C448.428 481.08 445.154 489.859 438 498l-1.52 1.836c-5.498 6.127-13.385 10.536-21.48 12.164-1.807.092-3.618.13-5.428.134l-3.36.014h-3.692l-3.921.01c-3.596.01-7.191.014-10.787.017-3.876.004-7.753.013-11.63.022-9.364.02-18.729.03-28.093.039-4.412.004-8.823.01-13.234.015a66056.891 66056.891 0 0 1-55.417.044l-2.866.002c-15.318.008-30.636.033-45.954.066-15.731.033-31.462.05-47.193.054-8.83.002-17.661.01-26.492.036-7.521.022-15.043.03-22.565.02-3.835-.004-7.67-.002-11.505.017-4.165.021-8.33.01-12.495-.002l-3.644.033C95.43 512.435 86.51 509.478 78 502l-1.836-1.52c-6.504-5.837-11.794-14.9-12.293-23.773l-.005-2.574-.014-2.98v-3.268l-.01-3.477c-.01-3.185-.014-6.37-.017-9.556-.004-3.435-.013-6.87-.022-10.304-.02-8.294-.03-16.588-.039-24.881l-.015-11.715a51760.258 51760.258 0 0 1-.046-51.571c-.008-13.566-.033-27.133-.066-40.7-.033-13.924-.05-27.85-.054-41.775-.002-7.82-.011-15.64-.036-23.46a4232.01 4232.01 0 0 1-.02-19.97c.004-3.397.002-6.794-.017-10.191-.018-3.681-.011-7.362.002-11.043l-.033-3.26c.063-7.227.063-7.227 2.426-11.122 3.852-3.42 7.242-2.99 12.165-2.958l2.413.005c2.547.005 5.095.018 7.642.03A5665.44 5665.44 0 0 1 106 192l-.013-1.86a5471.69 5471.69 0 0 1-.097-19.423c-.01-2.406-.023-4.812-.04-7.218C105.522 117.382 116.55 77.945 149 44l2.027-2.219C165.556 26.414 185.15 14.935 205 8l1.916-.683C232.996-1.87 264.052-3.743 291 3Zm-94.568 85.425C181.578 103.154 173.92 121.555 171 142v50h170c1.35-58.446 1.35-58.446-26.27-104.371C304.253 77.603 291.832 71.088 278 67l-2.383-.707c-28.244-7.243-58.416 2.39-79.185 22.132Zm27.256 203.888C215.524 302.603 212.9 314.074 214 327c1.856 9.17 6.107 18.565 13.938 24.063C230 353 230 353 230.197 356.978c-.121 5.134-.67 10.193-1.292 15.287l-.683 5.886c-.36 3.046-.722 6.09-1.087 9.136-3.61 18.357-3.61 18.357-.236 35.486 2.189 2.32 3.057 3.153 6.205 3.373l2.633.03 2.984.039 3.235.022 3.319.025c2.32.014 4.642.024 6.963.032 3.549.017 7.097.061 10.646.105 2.253.01 4.506.019 6.76.026l3.217.053c5.94 0 5.94 0 11.285-2.38 4.3-4.87 3.196-10.926 2.853-17.099-.642-7.602-1.593-15.176-2.5-22.75-.36-3.03-.718-6.06-1.07-9.09-.217-1.871-.44-3.742-.668-5.613-.485-4.162-.876-8.316-1.026-12.505l-.08-2.147c.58-3.196 2.898-4.413 5.399-6.25 7.08-5.986 10.408-16.01 11.261-24.965.464-13.621-3.684-24.49-12.972-34.457-9.14-8.472-20.483-11.752-32.715-11.532-11.37.967-21.213 6.284-28.941 14.622Z"/>
          </svg>
        '';
      lockHover =
        pkgs.writeText "lock-hover.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#272727" d="m291 3 2.082.504c37.02 9.151 70.08 33.429 90.31 65.717 15.457 25.65 22.848 53.353 22.706 83.228l-.005 3.45c-.005 3.597-.018 7.193-.03 10.788-.006 2.456-.01 4.91-.014 7.366-.011 5.982-.028 11.965-.049 17.947l3.225-.063c3.96-.073 7.92-.119 11.881-.157 1.712-.02 3.424-.047 5.136-.082 2.465-.048 4.93-.071 7.395-.089l2.308-.062c3.74-.002 5.836.312 9.015 2.352 2.931 3.019 3.166 4.614 3.174 8.705l.014 2.958v3.272l.01 3.46c.01 3.177.014 6.355.017 9.533.004 3.425.013 6.849.022 10.273.02 8.277.03 16.553.039 24.83l.015 11.695a51542.348 51542.348 0 0 1 .046 51.512c.008 13.537.033 27.073.066 40.61.033 13.9.05 27.8.054 41.701.002 7.803.01 15.607.036 23.41.022 6.649.03 13.297.02 19.946-.004 3.39 0 6.78.017 10.17.018 3.683.01 7.365-.002 11.049l.033 3.212C448.428 481.08 445.154 489.859 438 498l-1.52 1.836c-5.498 6.127-13.385 10.536-21.48 12.164-1.807.092-3.618.13-5.428.134l-3.36.014h-3.692l-3.921.01c-3.596.01-7.191.014-10.787.017-3.876.004-7.753.013-11.63.022-9.364.02-18.729.03-28.093.039-4.412.004-8.823.01-13.234.015a66056.891 66056.891 0 0 1-55.417.044l-2.866.002c-15.318.008-30.636.033-45.954.066-15.731.033-31.462.05-47.193.054-8.83.002-17.661.01-26.492.036-7.521.022-15.043.03-22.565.02-3.835-.004-7.67-.002-11.505.017-4.165.021-8.33.01-12.495-.002l-3.644.033C95.43 512.435 86.51 509.478 78 502l-1.836-1.52c-6.504-5.837-11.794-14.9-12.293-23.773l-.005-2.574-.014-2.98v-3.268l-.01-3.477c-.01-3.185-.014-6.37-.017-9.556-.004-3.435-.013-6.87-.022-10.304-.02-8.294-.03-16.588-.039-24.881l-.015-11.715a51760.258 51760.258 0 0 1-.046-51.571c-.008-13.566-.033-27.133-.066-40.7-.033-13.924-.05-27.85-.054-41.775-.002-7.82-.011-15.64-.036-23.46a4232.01 4232.01 0 0 1-.02-19.97c.004-3.397.002-6.794-.017-10.191-.018-3.681-.011-7.362.002-11.043l-.033-3.26c.063-7.227.063-7.227 2.426-11.122 3.852-3.42 7.242-2.99 12.165-2.958l2.413.005c2.547.005 5.095.018 7.642.03A5665.44 5665.44 0 0 1 106 192l-.013-1.86a5471.69 5471.69 0 0 1-.097-19.423c-.01-2.406-.023-4.812-.04-7.218C105.522 117.382 116.55 77.945 149 44l2.027-2.219C165.556 26.414 185.15 14.935 205 8l1.916-.683C232.996-1.87 264.052-3.743 291 3Zm-94.568 85.425C181.578 103.154 173.92 121.555 171 142v50h170c1.35-58.446 1.35-58.446-26.27-104.371C304.253 77.603 291.832 71.088 278 67l-2.383-.707c-28.244-7.243-58.416 2.39-79.185 22.132Zm27.256 203.888C215.524 302.603 212.9 314.074 214 327c1.856 9.17 6.107 18.565 13.938 24.063C230 353 230 353 230.197 356.978c-.121 5.134-.67 10.193-1.292 15.287l-.683 5.886c-.36 3.046-.722 6.09-1.087 9.136-3.61 18.357-3.61 18.357-.236 35.486 2.189 2.32 3.057 3.153 6.205 3.373l2.633.03 2.984.039 3.235.022 3.319.025c2.32.014 4.642.024 6.963.032 3.549.017 7.097.061 10.646.105 2.253.01 4.506.019 6.76.026l3.217.053c5.94 0 5.94 0 11.285-2.38 4.3-4.87 3.196-10.926 2.853-17.099-.642-7.602-1.593-15.176-2.5-22.75-.36-3.03-.718-6.06-1.07-9.09-.217-1.871-.44-3.742-.668-5.613-.485-4.162-.876-8.316-1.026-12.505l-.08-2.147c.58-3.196 2.898-4.413 5.399-6.25 7.08-5.986 10.408-16.01 11.261-24.965.464-13.621-3.684-24.49-12.972-34.457-9.14-8.472-20.483-11.752-32.715-11.532-11.37.967-21.213 6.284-28.941 14.622Z"/>
          </svg>
        '';
      logout =
        pkgs.writeText "logout.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#EBDBB2" d="m83.087-.267 3.359-.014c3.709-.013 7.418-.011 11.127-.01 2.661-.006 5.323-.012 7.984-.02 6.477-.016 12.954-.022 19.43-.023 5.268-.001 10.536-.005 15.803-.012 14.95-.017 29.9-.026 44.85-.025h4.883c13.06.001 26.12-.018 39.181-.046 13.425-.029 26.85-.042 40.275-.04 7.53 0 15.062-.005 22.593-.027a3880.76 3880.76 0 0 1 19.24-.009c3.27.006 6.537.005 9.806-.01 3.553-.016 7.106-.007 10.66.009l3.087-.032C351.268-.374 364.054 6.927 375 18c9.832 10.73 14.308 23.294 14.29 37.713l.02 2.483c.02 2.677.024 5.353.026 8.03l.02 5.629c.012 3.918.016 7.837.015 11.755 0 5.012.027 10.022.061 15.034.022 3.869.026 7.738.025 11.607.003 1.847.012 3.695.027 5.542.02 2.585.014 5.168.002 7.752l.034 2.29c-.065 5.468-1.432 8.638-4.52 13.165-5.608 5.188-9.793 6.422-17.316 6.242-6.362-.574-9.587-3.858-13.485-8.523-2.632-3.772-2.344-7.663-2.34-12.061l-.011-2.258c-.008-1.619-.013-3.238-.017-4.857-.007-2.57-.023-5.139-.041-7.709-.052-7.306-.1-14.612-.116-21.92-.01-4.47-.04-8.94-.081-13.412a596.43 596.43 0 0 1-.015-5.091C351.77 56.15 351.77 56.15 347 44c-6.003-5.794-11.642-6.149-19.757-6.12l-2.708-.003c-3-.001-6 .004-9 .01l-6.446-.001c-5.838 0-11.677.006-17.515.013-6.1.006-12.199.006-18.298.008-11.552.003-23.105.011-34.657.021-13.151.011-26.302.017-39.453.022-27.056.01-54.11.028-81.166.05l2.105 1.175c3.217 1.796 6.433 3.594 9.649 5.391l3.31 1.848a1278.288 1278.288 0 0 1 21.873 12.524l3.352 1.96 2.621 1.54a3056.47 3056.47 0 0 0 18.965 11l3.247 1.873a4789.88 4789.88 0 0 0 15.07 8.66c47.048 26.907 47.048 26.907 53.3 49.58 1.38 6.657 1.649 13 1.628 19.782l.003 3.111c.001 3.434-.004 6.867-.01 10.3l.001 7.392c0 5.301-.003 10.602-.008 15.903-.008 7.664-.011 15.329-.012 22.993-.002 12.436-.01 24.872-.019 37.308-.009 12.077-.016 24.155-.02 36.233v2.257l-.005 11.212c-.01 30.986-.028 61.972-.05 92.958 10.962-.038 21.924-.097 32.885-.184 5.09-.04 10.18-.072 15.271-.087 4.915-.015 9.83-.05 14.744-.097 1.873-.015 3.746-.023 5.618-.024 2.629-.002 5.256-.03 7.885-.062l2.332.015c6.546-.126 10.871-2.167 15.577-6.873 3.3-5.256 3.937-10.615 3.96-16.721l.015-2.014c.01-1.43.016-2.859.018-4.288.004-2.267.02-4.533.04-6.8.056-6.438.087-12.878.111-19.317.016-3.95.046-7.9.085-11.85.012-1.5.018-3 .018-4.5 0-2.098.018-4.195.04-6.294l.016-3.61c.616-5.27 2.457-8.407 6.26-12.044 5.59-4.025 10.302-5.171 17.125-4.25 6.196 2.018 9.6 5.236 13.083 10.699 1.297 3.254 1.187 6.119 1.208 9.617l.02 2.214c.019 2.416.023 4.832.025 7.247l.02 5.069c.012 3.546.016 7.093.015 10.64 0 4.512.027 9.023.061 13.535.023 3.494.026 6.989.025 10.483.003 1.661.011 3.323.027 4.984.154 18.11-3.962 33.573-16.754 46.969-11.51 10.72-25.869 15.727-41.397 15.657h-2.575c-2.791 0-5.583-.008-8.375-.016l-5.826-.005c-5.1-.003-10.2-.013-15.299-.024-5.208-.01-10.417-.015-15.625-.02-10.211-.01-20.422-.028-30.633-.049l.048 2.624c.051 3.284.089 6.567.117 9.852.015 1.408.035 2.815.061 4.223.332 18.221-2.85 34.358-15.709 48.065-11.34 11.37-25.047 16.56-40.892 16.799-18.194-.255-31.2-8.378-46.468-17.494-6.014-3.59-12.084-7.08-18.157-10.569l-6.5-3.75-3.25-1.875-9.75-5.625-3.252-1.876-6.478-3.738c-6.658-3.842-13.319-7.68-19.98-11.516-3.28-1.89-6.554-3.786-9.83-5.682a808.784 808.784 0 0 0-10.983-6.25C45.436 434.883 33.454 423.826 28 405c-.888-3.762-1.128-7.245-1.134-11.107l-.014-3.743v-4.103c-.002-1.455-.006-2.91-.01-4.366-.01-4-.014-8-.017-11.999-.004-4.314-.013-8.628-.022-12.941-.02-10.419-.03-20.837-.039-31.256l-.015-14.726a81816.863 81816.863 0 0 1-.046-64.856 36028.42 36028.42 0 0 0-.066-51.13c-.033-17.505-.05-35.01-.054-52.516-.002-9.825-.01-19.65-.036-29.476-.022-8.37-.03-16.738-.02-25.107.004-4.267.002-8.534-.017-12.8a1384.97 1384.97 0 0 1-.001-11.741c.002-1.409-.002-2.817-.014-4.226C26.348 40.427 32.202 27.043 45 14l1.68-1.754C56.56 2.832 69.922-.307 83.087-.267Z"/>
            <path fill="#EBDBB2" d="M423.408 146.3c6.63 3.41 11.632 9.166 16.826 14.403l3.502 3.49a2040.83 2040.83 0 0 1 7.292 7.313c3.095 3.119 6.208 6.218 9.327 9.313 2.411 2.397 4.813 4.803 7.211 7.212 1.144 1.146 2.29 2.29 3.44 3.43 12.874 12.792 12.874 12.792 14.56 21.445l-.003 2.594.066 2.594c-2.082 9.619-10.893 16.678-17.578 23.394l-3.539 3.576a2592.74 2592.74 0 0 1-7.411 7.446 1472.044 1472.044 0 0 0-9.417 9.536 1251.951 1251.951 0 0 1-7.312 7.363 491.126 491.126 0 0 0-3.467 3.518C424.89 285.219 424.89 285.219 416 286c-6.336-.31-11-1.826-15.594-6.3-3.662-4.425-4.954-9.107-4.683-14.731 1.433-10.172 10.155-16.887 17.035-23.742l1.822-1.82L419 235l-2.117-.004c-17.019-.038-34.038-.097-51.056-.18-8.23-.04-16.46-.072-24.69-.087-7.176-.013-14.351-.04-21.527-.084-3.797-.022-7.595-.038-11.392-.037-3.58 0-7.157-.017-10.736-.05-1.93-.012-3.862-.005-5.792.003-7.708-.092-13.747-.744-19.53-6.342l-1.097-1.719-1.153-1.719c-2.502-4.897-2.909-10.682-1.226-15.902 2.67-5.86 6.063-9.622 12.197-11.992 5.618-1.49 11.445-1.196 17.214-1.206l3.964-.03c3.57-.027 7.14-.043 10.71-.056 3.736-.015 7.473-.042 11.21-.068 7.069-.046 14.138-.083 21.206-.116 8.051-.039 16.102-.088 24.153-.138 16.554-.104 33.108-.193 49.662-.273l-1.788-1.725c-2.686-2.602-5.355-5.22-8.024-7.838l-2.815-2.712c-5.347-5.27-9.396-9.362-10.771-16.913.08-6.172 1.67-10.756 5.71-15.562 6.852-5.736 13.703-7.151 22.096-3.95Z"/>
          </svg>
        '';
      logoutHover =
        pkgs.writeText "logout-hover.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#272727" d="m83.087-.267 3.359-.014c3.709-.013 7.418-.011 11.127-.01 2.661-.006 5.323-.012 7.984-.02 6.477-.016 12.954-.022 19.43-.023 5.268-.001 10.536-.005 15.803-.012 14.95-.017 29.9-.026 44.85-.025h4.883c13.06.001 26.12-.018 39.181-.046 13.425-.029 26.85-.042 40.275-.04 7.53 0 15.062-.005 22.593-.027a3880.76 3880.76 0 0 1 19.24-.009c3.27.006 6.537.005 9.806-.01 3.553-.016 7.106-.007 10.66.009l3.087-.032C351.268-.374 364.054 6.927 375 18c9.832 10.73 14.308 23.294 14.29 37.713l.02 2.483c.02 2.677.024 5.353.026 8.03l.02 5.629c.012 3.918.016 7.837.015 11.755 0 5.012.027 10.022.061 15.034.022 3.869.026 7.738.025 11.607.003 1.847.012 3.695.027 5.542.02 2.585.014 5.168.002 7.752l.034 2.29c-.065 5.468-1.432 8.638-4.52 13.165-5.608 5.188-9.793 6.422-17.316 6.242-6.362-.574-9.587-3.858-13.485-8.523-2.632-3.772-2.344-7.663-2.34-12.061l-.011-2.258c-.008-1.619-.013-3.238-.017-4.857-.007-2.57-.023-5.139-.041-7.709-.052-7.306-.1-14.612-.116-21.92-.01-4.47-.04-8.94-.081-13.412a596.43 596.43 0 0 1-.015-5.091C351.77 56.15 351.77 56.15 347 44c-6.003-5.794-11.642-6.149-19.757-6.12l-2.708-.003c-3-.001-6 .004-9 .01l-6.446-.001c-5.838 0-11.677.006-17.515.013-6.1.006-12.199.006-18.298.008-11.552.003-23.105.011-34.657.021-13.151.011-26.302.017-39.453.022-27.056.01-54.11.028-81.166.05l2.105 1.175c3.217 1.796 6.433 3.594 9.649 5.391l3.31 1.848a1278.288 1278.288 0 0 1 21.873 12.524l3.352 1.96 2.621 1.54a3056.47 3056.47 0 0 0 18.965 11l3.247 1.873a4789.88 4789.88 0 0 0 15.07 8.66c47.048 26.907 47.048 26.907 53.3 49.58 1.38 6.657 1.649 13 1.628 19.782l.003 3.111c.001 3.434-.004 6.867-.01 10.3l.001 7.392c0 5.301-.003 10.602-.008 15.903-.008 7.664-.011 15.329-.012 22.993-.002 12.436-.01 24.872-.019 37.308-.009 12.077-.016 24.155-.02 36.233v2.257l-.005 11.212c-.01 30.986-.028 61.972-.05 92.958 10.962-.038 21.924-.097 32.885-.184 5.09-.04 10.18-.072 15.271-.087 4.915-.015 9.83-.05 14.744-.097 1.873-.015 3.746-.023 5.618-.024 2.629-.002 5.256-.03 7.885-.062l2.332.015c6.546-.126 10.871-2.167 15.577-6.873 3.3-5.256 3.937-10.615 3.96-16.721l.015-2.014c.01-1.43.016-2.859.018-4.288.004-2.267.02-4.533.04-6.8.056-6.438.087-12.878.111-19.317.016-3.95.046-7.9.085-11.85.012-1.5.018-3 .018-4.5 0-2.098.018-4.195.04-6.294l.016-3.61c.616-5.27 2.457-8.407 6.26-12.044 5.59-4.025 10.302-5.171 17.125-4.25 6.196 2.018 9.6 5.236 13.083 10.699 1.297 3.254 1.187 6.119 1.208 9.617l.02 2.214c.019 2.416.023 4.832.025 7.247l.02 5.069c.012 3.546.016 7.093.015 10.64 0 4.512.027 9.023.061 13.535.023 3.494.026 6.989.025 10.483.003 1.661.011 3.323.027 4.984.154 18.11-3.962 33.573-16.754 46.969-11.51 10.72-25.869 15.727-41.397 15.657h-2.575c-2.791 0-5.583-.008-8.375-.016l-5.826-.005c-5.1-.003-10.2-.013-15.299-.024-5.208-.01-10.417-.015-15.625-.02-10.211-.01-20.422-.028-30.633-.049l.048 2.624c.051 3.284.089 6.567.117 9.852.015 1.408.035 2.815.061 4.223.332 18.221-2.85 34.358-15.709 48.065-11.34 11.37-25.047 16.56-40.892 16.799-18.194-.255-31.2-8.378-46.468-17.494-6.014-3.59-12.084-7.08-18.157-10.569l-6.5-3.75-3.25-1.875-9.75-5.625-3.252-1.876-6.478-3.738c-6.658-3.842-13.319-7.68-19.98-11.516-3.28-1.89-6.554-3.786-9.83-5.682a808.784 808.784 0 0 0-10.983-6.25C45.436 434.883 33.454 423.826 28 405c-.888-3.762-1.128-7.245-1.134-11.107l-.014-3.743v-4.103c-.002-1.455-.006-2.91-.01-4.366-.01-4-.014-8-.017-11.999-.004-4.314-.013-8.628-.022-12.941-.02-10.419-.03-20.837-.039-31.256l-.015-14.726a81816.863 81816.863 0 0 1-.046-64.856 36028.42 36028.42 0 0 0-.066-51.13c-.033-17.505-.05-35.01-.054-52.516-.002-9.825-.01-19.65-.036-29.476-.022-8.37-.03-16.738-.02-25.107.004-4.267.002-8.534-.017-12.8a1384.97 1384.97 0 0 1-.001-11.741c.002-1.409-.002-2.817-.014-4.226C26.348 40.427 32.202 27.043 45 14l1.68-1.754C56.56 2.832 69.922-.307 83.087-.267Z"/>
            <path fill="#272727" d="M423.408 146.3c6.63 3.41 11.632 9.166 16.826 14.403l3.502 3.49a2040.83 2040.83 0 0 1 7.292 7.313c3.095 3.119 6.208 6.218 9.327 9.313 2.411 2.397 4.813 4.803 7.211 7.212 1.144 1.146 2.29 2.29 3.44 3.43 12.874 12.792 12.874 12.792 14.56 21.445l-.003 2.594.066 2.594c-2.082 9.619-10.893 16.678-17.578 23.394l-3.539 3.576a2592.74 2592.74 0 0 1-7.411 7.446 1472.044 1472.044 0 0 0-9.417 9.536 1251.951 1251.951 0 0 1-7.312 7.363 491.126 491.126 0 0 0-3.467 3.518C424.89 285.219 424.89 285.219 416 286c-6.336-.31-11-1.826-15.594-6.3-3.662-4.425-4.954-9.107-4.683-14.731 1.433-10.172 10.155-16.887 17.035-23.742l1.822-1.82L419 235l-2.117-.004c-17.019-.038-34.038-.097-51.056-.18-8.23-.04-16.46-.072-24.69-.087-7.176-.013-14.351-.04-21.527-.084-3.797-.022-7.595-.038-11.392-.037-3.58 0-7.157-.017-10.736-.05-1.93-.012-3.862-.005-5.792.003-7.708-.092-13.747-.744-19.53-6.342l-1.097-1.719-1.153-1.719c-2.502-4.897-2.909-10.682-1.226-15.902 2.67-5.86 6.063-9.622 12.197-11.992 5.618-1.49 11.445-1.196 17.214-1.206l3.964-.03c3.57-.027 7.14-.043 10.71-.056 3.736-.015 7.473-.042 11.21-.068 7.069-.046 14.138-.083 21.206-.116 8.051-.039 16.102-.088 24.153-.138 16.554-.104 33.108-.193 49.662-.273l-1.788-1.725c-2.686-2.602-5.355-5.22-8.024-7.838l-2.815-2.712c-5.347-5.27-9.396-9.362-10.771-16.913.08-6.172 1.67-10.756 5.71-15.562 6.852-5.736 13.703-7.151 22.096-3.95Z"/>
          </svg>
        '';
      power =
        pkgs.writeText "power.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#EBDBB2" d="M153 107c6.592 5.951 9.906 13.235 10.875 22 .488 9.882-2.005 17.017-7.875 25-1.87 2.006-3.827 3.886-5.809 5.781-25.73 26.052-37.355 64.059-37.226 99.985.99 39.077 18.677 74.864 46.39 101.836 28.831 26.147 66.798 38.853 105.52 37.21C300.503 395.986 330.995 381.18 357 357l1.836-1.672c22.575-21.409 38.148-55.624 39.287-86.678.084-4.03.124-8.057.127-12.087l.002-2.17c-.016-10.768-.52-20.924-3.252-31.393l-.52-2.075c-5.882-23.16-16.986-43.299-33.043-60.988-9.136-10.085-14.161-17.684-13.785-31.726.871-8.041 4.607-15.507 10.348-21.211 8.62-6.411 17.28-9.141 28-8 11.81 2.717 19.515 9.896 27 19l2.234 2.543C438.592 147.508 453.368 180.349 461 215l.543 2.397c10.942 50.788-1.575 107.521-29.062 151.005-11.001 16.59-23.959 33-39.481 45.598l-3.156 2.664c-33.728 28.123-78.262 47.124-122.559 47.574l-2.438.03C203.09 464.867 149.429 444.405 105 401c-2.485-2.56-4.753-5.231-7-8l-2.664-3.156c-27.899-33.46-47.156-77.95-47.574-121.934l-.03-2.586c-.5-54.564 14.319-104.889 50.811-146.52a185.84 185.84 0 0 0 4.383-5.171c5.32-6.483 11.777-11.649 20.074-13.633l3.063-.75c10.157-.645 18.895 1.415 26.937 7.75Z"/>
            <path fill="#EBDBB2" d="M271.89 50.742C280.318 55.767 285.273 62.594 288 72c.257 3.165.257 3.165.267 6.621l.026 3.989-.002 4.34a3166.191 3166.191 0 0 1 .044 17.064c0 2.6.005 5.199.01 7.797.019 9.075.027 18.15.026 27.225-.002 8.446.02 16.89.051 25.336.026 7.263.037 14.525.036 21.787 0 4.332.005 8.665.026 12.997.02 4.077.02 8.154.005 12.23-.002 1.492.003 2.983.015 4.474.088 11.547-1.568 19.74-9.578 28.35-7.774 7.223-15.92 9.286-26.387 9.099-9.808-.856-16.793-5.754-23.074-13.106-4.208-5.545-5.712-10.83-5.732-17.818l-.026-3.984.002-4.336a3159.818 3159.818 0 0 1-.044-17.047c0-2.597-.005-5.194-.01-7.79-.019-9.07-.027-18.14-.026-27.209.002-8.438-.02-16.875-.051-25.313-.026-7.257-.037-14.514-.036-21.771 0-4.329-.005-8.657-.026-12.985-.02-4.075-.02-8.15-.005-12.224a467.32 467.32 0 0 0-.015-4.467c-.083-10.965 1.037-20.415 8.8-28.728 10.598-9.527 26.641-12.005 39.595-5.789Z"/>
          </svg>
        '';
      powerHover =
        pkgs.writeText "power-hover.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#272727" d="M153 107c6.592 5.951 9.906 13.235 10.875 22 .488 9.882-2.005 17.017-7.875 25-1.87 2.006-3.827 3.886-5.809 5.781-25.73 26.052-37.355 64.059-37.226 99.985.99 39.077 18.677 74.864 46.39 101.836 28.831 26.147 66.798 38.853 105.52 37.21C300.503 395.986 330.995 381.18 357 357l1.836-1.672c22.575-21.409 38.148-55.624 39.287-86.678.084-4.03.124-8.057.127-12.087l.002-2.17c-.016-10.768-.52-20.924-3.252-31.393l-.52-2.075c-5.882-23.16-16.986-43.299-33.043-60.988-9.136-10.085-14.161-17.684-13.785-31.726.871-8.041 4.607-15.507 10.348-21.211 8.62-6.411 17.28-9.141 28-8 11.81 2.717 19.515 9.896 27 19l2.234 2.543C438.592 147.508 453.368 180.349 461 215l.543 2.397c10.942 50.788-1.575 107.521-29.062 151.005-11.001 16.59-23.959 33-39.481 45.598l-3.156 2.664c-33.728 28.123-78.262 47.124-122.559 47.574l-2.438.03C203.09 464.867 149.429 444.405 105 401c-2.485-2.56-4.753-5.231-7-8l-2.664-3.156c-27.899-33.46-47.156-77.95-47.574-121.934l-.03-2.586c-.5-54.564 14.319-104.889 50.811-146.52a185.84 185.84 0 0 0 4.383-5.171c5.32-6.483 11.777-11.649 20.074-13.633l3.063-.75c10.157-.645 18.895 1.415 26.937 7.75Z"/>
            <path fill="#272727" d="M271.89 50.742C280.318 55.767 285.273 62.594 288 72c.257 3.165.257 3.165.267 6.621l.026 3.989-.002 4.34a3166.191 3166.191 0 0 1 .044 17.064c0 2.6.005 5.199.01 7.797.019 9.075.027 18.15.026 27.225-.002 8.446.02 16.89.051 25.336.026 7.263.037 14.525.036 21.787 0 4.332.005 8.665.026 12.997.02 4.077.02 8.154.005 12.23-.002 1.492.003 2.983.015 4.474.088 11.547-1.568 19.74-9.578 28.35-7.774 7.223-15.92 9.286-26.387 9.099-9.808-.856-16.793-5.754-23.074-13.106-4.208-5.545-5.712-10.83-5.732-17.818l-.026-3.984.002-4.336a3159.818 3159.818 0 0 1-.044-17.047c0-2.597-.005-5.194-.01-7.79-.019-9.07-.027-18.14-.026-27.209.002-8.438-.02-16.875-.051-25.313-.026-7.257-.037-14.514-.036-21.771 0-4.329-.005-8.657-.026-12.985-.02-4.075-.02-8.15-.005-12.224a467.32 467.32 0 0 0-.015-4.467c-.083-10.965 1.037-20.415 8.8-28.728 10.598-9.527 26.641-12.005 39.595-5.789Z"/>
          </svg>
        '';
      reboot =
        pkgs.writeText "reboot.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#EBDBB2" d="M334.582 54.93c7.443 6.877 11.88 16.618 12.719 26.683.041 13.135-2.135 22.915-11.41 32.586-8.675 8.091-17.022 11.166-28.766 12.114-9.072-.341-17.248-3.72-25.5-7.188-34.055-14.213-73.991-14.01-108.227-.34C134.738 134.986 105.971 164.363 90 203c-2.412 6.225-4.354 12.533-6 19l-.535 2.059c-9.015 36.67-.523 76.358 18.053 108.502 3.979 6.548 8.568 12.57 13.482 18.439l1.456 1.748c24.4 28.843 60.517 46.396 97.903 50.041 37.35 2.983 75.032-7.705 104.391-31.226 1.761-1.508 3.51-3.03 5.25-4.563.975-.83 1.95-1.66 2.953-2.516C334.693 357.77 341.038 350.32 347 342l1.207-1.683C359.032 324.948 365.863 307.991 371 290l-2.687.459c-3.335.566-6.671 1.124-10.008 1.677-1.436.24-2.871.482-4.306.728-22.531 3.85-22.531 3.85-30.179-.532-5.903-4.32-8.842-9.235-10.21-16.367-.81-8.08 3.174-14.333 6.9-21.184 1.763-3.29 3.465-6.609 5.162-9.933 6.491-12.705 13.07-25.348 19.96-37.843 3.73-6.78 7.316-13.63 10.868-20.505a1311.698 1311.698 0 0 1 17.181-32.109 823.403 823.403 0 0 0 2.686-4.911l1.324-2.425 1.17-2.157c2.93-4.882 6.812-8.024 12.139-9.898 7.453-.937 12.646.071 19 4 2.838 2.347 5.38 4.935 7.938 7.582l2.195 2.22c2.298 2.327 4.583 4.668 6.867 7.01 2.286 2.33 4.576 4.656 6.867 6.98a1116.53 1116.53 0 0 1 4.248 4.334c3.178 3.24 6.39 6.364 9.83 9.326 4.51 3.885 8.683 8.068 12.868 12.298l2.464 2.476c3.445 3.461 6.884 6.928 10.324 10.395 2.526 2.545 5.056 5.087 7.587 7.629l2.317 2.343c4.127 4.146 8.338 8.12 12.779 11.93 14.932 12.846 14.932 12.846 16.083 22.582.343 8.76-1.112 14.139-6.804 20.708-9.037 6.729-25.107 6.551-36.103 8.065-2.201.305-4.4.621-6.6.938l-3.923.546c-.97.21-1.939.42-2.937.638-1.194 2.387-1.387 4.352-1.727 7.004C448.837 324.084 434.468 363.176 409 395l-2.176 2.758c-5.64 7.032-11.65 13.68-17.824 20.242l-1.867 1.996c-4.972 5.15-10.535 9.559-16.133 14.004l-2.965 2.41c-8.85 7.042-18.247 12.94-28.035 18.59l-2.093 1.215c-50.744 29.117-113.57 35.192-169.766 20.512C132.188 466.856 100.29 449.45 73 424l-5.063-4.438c-5.033-4.548-9.55-9.39-13.937-14.562l-1.367-1.6C21.568 366.759.2 316.982-.238 268.508l-.03-2.713C-.438 246.215-.424 227.183 4 208l.666-2.891C18.66 146.405 54.413 94.44 105.799 62.337 130.906 47.08 158.061 36.29 187 31l2.462-.458c45.191-8.023 107.204-3.949 145.12 24.388Z"/>
          </svg>
        '';
      rebootHover =
        pkgs.writeText "reboot-hover.svg"
        # html
        ''
          <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512">
            <path fill="#272727" d="M334.582 54.93c7.443 6.877 11.88 16.618 12.719 26.683.041 13.135-2.135 22.915-11.41 32.586-8.675 8.091-17.022 11.166-28.766 12.114-9.072-.341-17.248-3.72-25.5-7.188-34.055-14.213-73.991-14.01-108.227-.34C134.738 134.986 105.971 164.363 90 203c-2.412 6.225-4.354 12.533-6 19l-.535 2.059c-9.015 36.67-.523 76.358 18.053 108.502 3.979 6.548 8.568 12.57 13.482 18.439l1.456 1.748c24.4 28.843 60.517 46.396 97.903 50.041 37.35 2.983 75.032-7.705 104.391-31.226 1.761-1.508 3.51-3.03 5.25-4.563.975-.83 1.95-1.66 2.953-2.516C334.693 357.77 341.038 350.32 347 342l1.207-1.683C359.032 324.948 365.863 307.991 371 290l-2.687.459c-3.335.566-6.671 1.124-10.008 1.677-1.436.24-2.871.482-4.306.728-22.531 3.85-22.531 3.85-30.179-.532-5.903-4.32-8.842-9.235-10.21-16.367-.81-8.08 3.174-14.333 6.9-21.184 1.763-3.29 3.465-6.609 5.162-9.933 6.491-12.705 13.07-25.348 19.96-37.843 3.73-6.78 7.316-13.63 10.868-20.505a1311.698 1311.698 0 0 1 17.181-32.109 823.403 823.403 0 0 0 2.686-4.911l1.324-2.425 1.17-2.157c2.93-4.882 6.812-8.024 12.139-9.898 7.453-.937 12.646.071 19 4 2.838 2.347 5.38 4.935 7.938 7.582l2.195 2.22c2.298 2.327 4.583 4.668 6.867 7.01 2.286 2.33 4.576 4.656 6.867 6.98a1116.53 1116.53 0 0 1 4.248 4.334c3.178 3.24 6.39 6.364 9.83 9.326 4.51 3.885 8.683 8.068 12.868 12.298l2.464 2.476c3.445 3.461 6.884 6.928 10.324 10.395 2.526 2.545 5.056 5.087 7.587 7.629l2.317 2.343c4.127 4.146 8.338 8.12 12.779 11.93 14.932 12.846 14.932 12.846 16.083 22.582.343 8.76-1.112 14.139-6.804 20.708-9.037 6.729-25.107 6.551-36.103 8.065-2.201.305-4.4.621-6.6.938l-3.923.546c-.97.21-1.939.42-2.937.638-1.194 2.387-1.387 4.352-1.727 7.004C448.837 324.084 434.468 363.176 409 395l-2.176 2.758c-5.64 7.032-11.65 13.68-17.824 20.242l-1.867 1.996c-4.972 5.15-10.535 9.559-16.133 14.004l-2.965 2.41c-8.85 7.042-18.247 12.94-28.035 18.59l-2.093 1.215c-50.744 29.117-113.57 35.192-169.766 20.512C132.188 466.856 100.29 449.45 73 424l-5.063-4.438c-5.033-4.548-9.55-9.39-13.937-14.562l-1.367-1.6C21.568 366.759.2 316.982-.238 268.508l-.03-2.713C-.438 246.215-.424 227.183 4 208l.666-2.891C18.66 146.405 54.413 94.44 105.799 62.337 130.906 47.08 158.061 36.29 187 31l2.462-.458c45.191-8.023 107.204-3.949 145.12 24.388Z"/>
          </svg>
        '';
    in ''
      window {
        font-family: JetBrainsMono;
        font-size: 13pt;
        color: #ebdbb2; /* text */
        background-color: rgba(40, 40, 40, 0.76);
      }

      button {
        background-repeat: no-repeat;
        background-position: center;
        background-size: 25%;
        border-style: solid;
        border-radius: 4px;
        border-width: 2px;
        border-color: #ebdbb2;
        background-color: rgba(40, 40, 40, 0.76);
        margin: 10px;
        transition:
          box-shadow 0.3s ease-in-out,
          background-color 0.3s ease-in-out;
      }

      button:hover {
        background-color: rgba(104, 157, 106, 0.92);
        color: #282828;
      }

      button:focus {
        background-color: #ebdbb2;
        color: #282828;
      }

      #lock { background-image: image(url("${lock}")); }
      #lock:focus { background-image: image(url("${lockHover}")); }
      #lock:hover { background-image: image(url("${lockHover}")); }

      #logout { background-image: image(url("${logout}")); }
      #logout:focus { background-image: image(url("${logoutHover}")); }
      #logout:hover { background-image: image(url("${logoutHover}")); }

      #shutdown { background-image: image(url("${power}")); }
      #shutdown:focus { background-image: image(url("${powerHover}")); }
      #shutdown:hover { background-image: image(url("${powerHover}")); }

      #reboot { background-image: image(url("${reboot}")); }
      #reboot:focus { background-image: image(url("${rebootHover}")); }
      #reboot:hover { background-image: image(url("${rebootHover}")); }

    '';
  };

  # home.localStorePath = [
  #   ".config/wlogout/layout"
  #   ".config/wlogout/style.css"
  # ];
}
